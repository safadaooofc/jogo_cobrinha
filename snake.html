<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Snake Game</title>
<style>
  :root{--bg:#f6f7fb;--panel:#fff;--ink:#222}
  *{box-sizing:border-box}
  body{margin:0;min-height:100svh;display:grid;place-items:center;background:var(--bg);
       font:16px/1.4 system-ui,Segoe UI,Arial}
  .wrap{display:grid;gap:.5rem;place-items:center;padding:1rem}
  .score{font-weight:600;color:var(--ink)}
  canvas{background:var(--panel);border:2px solid #333;border-radius:12px;image-rendering:pixelated;
         width:min(92vmin,520px);height:auto}
  kbd{background:#eee;border-radius:6px;padding:.15rem .4rem;border:1px solid #ccc}
</style>
</head>
<body>
  <div class="wrap">
    <h1 style="margin:.2rem 0">üêç Snake</h1>
    <div class="score" id="hud">Score: 0 | High: 0</div>
    <canvas id="game" width="400" height="400" aria-label="tabuleiro do jogo"></canvas>
    <div style="font-size:14px;color:#555">Use as setas <kbd>‚Üê</kbd> <kbd>‚Üë</kbd> <kbd>‚Üí</kbd> <kbd>‚Üì</kbd></div>
  </div>

<script>
(() => {
  const cvs = document.getElementById('game');
  const ctx = cvs.getContext('2d');
  const hud = document.getElementById('hud');
  const sz = 20;                     // tamanho de cada c√©lula (px)
  const COLS = cvs.width / sz, ROWS = cvs.height / sz;

  let snake, dir, food, score, high;

  const r = n => Math.floor(Math.random()*n);
  const loadHigh = () => Number(localStorage.getItem('snakeHigh')||0);
  const saveHigh = v => localStorage.setItem('snakeHigh', v);

  function placeFood(){
    let f;
    do { f = {x:r(COLS), y:r(ROWS)}; }
    while (snake.some(s=>s.x===f.x && s.y===f.y));
    return f;
  }

  function reset(){
    snake = [{x:Math.floor(COLS/2), y:Math.floor(ROWS/2)}];
    dir = {x:0,y:0}; // parado at√© apertar seta
    food = placeFood();
    score = 0;
    high = loadHigh();
    draw(); updateHUD();
  }

  function updateHUD(){ hud.textContent = `Score: ${score} | High: ${Math.max(high,score)}`; }

  function draw(){
    ctx.clearRect(0,0,cvs.width,cvs.height);
    // comida
    ctx.fillStyle = '#e53935';
    ctx.fillRect(food.x*sz, food.y*sz, sz, sz);
    // cobra (cabe√ßa verde escuro, corpo verde claro)
    snake.forEach((s,i)=>{
      ctx.fillStyle = i? '#43a047' : '#2e7d32';
      ctx.fillRect(s.x*sz, s.y*sz, sz, sz);
    });
    // dica inicial
    if (!dir.x && !dir.y){
      ctx.fillStyle = '#555'; ctx.font='14px system-ui'; ctx.textAlign='center';
      ctx.fillText('Pressione as setas para come√ßar', cvs.width/2, cvs.height-10);
    }
  }

  function step(){
    if (!dir.x && !dir.y) return draw();           // ainda parado
    const head = {x:snake[0].x+dir.x, y:snake[0].y+dir.y};

    // colis√£o parede / corpo
    if (head.x<0 || head.y<0 || head.x>=COLS || head.y>=ROWS ||
        snake.some(s=>s.x===head.x && s.y===head.y)){
      if (score>high) saveHigh(score);
      return reset();
    }

    snake.unshift(head);
    if (head.x===food.x && head.y===food.y){ score++; food = placeFood(); }
    else { snake.pop(); }

    updateHUD(); draw();
  }

  addEventListener('keydown', e=>{
    if (e.key==='ArrowLeft'  && dir.x!== 1) dir={x:-1,y: 0};
    if (e.key==='ArrowUp'    && dir.y!== 1) dir={x: 0,y:-1};
    if (e.key==='ArrowRight' && dir.x!==-1) dir={x: 1,y: 0};
    if (e.key==='ArrowDown'  && dir.y!==-1) dir={x: 0,y: 1};
  });

  reset();
  setInterval(step, 110);
})();
</script>
</body>
</html>
